<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZULCOM - Administrador</title>
  <link rel="stylesheet" href="/css/dashboard/navbar.css"/>
  <link rel="stylesheet" href="/css/dashboard/dashboard.css"/>
  <link rel="stylesheet" href="/css/inde.css"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet" />


   
</head>
<body>
  <div class="dashboard-container">
    <%- include('../partials/navadministrador') %>
    
    <main class="main-content">
      <header class="content-header">
        <h1>PANEL ADMINISTRATIVO</h1>
        <div class="user-actions">
          <div>
            <a href="/auth/change-password"><img src="/img/logo-perfil.png" alt="Logo Perfil" class="img-perfil"></a>
          </div>
          <% if (user && user.nombres && user.apellidos) { %>
            <span class="user-name">Administrador: <%= user.nombres %> <%= user.apellidos %> </span>
          <% } %>
          <a href="/auth/logout" class="logout-btn" onclick="return confirm('¿Estás seguro de cerrar sesión?')">Cerrar Sesión</a>
        </div>
      </header>

      <!-- Contenido específico del dashboard administrativo -->
      <div class="dashboard-content">
        <h2>Lista de Clientes</h2>
        <a href="/clientes/create" class="btn">Nuevo Cliente</a>

        <!-- Filtros avanzados -->
        <div class="filtro-avanzado">
          <input type="text" id="filtroCedula" placeholder="Filtrar por cédula">
          <input type="text" id="filtroNombre" placeholder="Filtrar por nombres">
          <input type="text" id="filtroApellido" placeholder="Filtrar por apellidos">
          <select id="filtroEstado">
            <option value="">Todos los estados</option>
            <option value="Activo">Activo</option>
            <option value="Inactivo">Inactivo</option>
          </select>
          <input type="text" id="filtroPlan" placeholder="Filtrar por plan">
          <button onclick="limpiarFiltros()">Limpiar Filtros</button>
        </div>

        <!-- Tabla de clientes -->
        <table>
          <thead>
            <tr>
              <th>Cédula</th>
              <th>Nombres</th>
              <th>Apellidos</th>
              <th>Teléfono</th>
              <th>Ubicación</th>
              <th>Coordenadas</th>
              <th>IP</th>
              <th>Estado</th>
              <th>Plan</th>           
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <% clientes.forEach(cliente => { %>
              <tr>
                <td><%= cliente.cedula %></td>
                <td><%= cliente.nombre %></td>
                <td><%= cliente.apellido %></td>
                <td><%= cliente.telefono1 %></td>
                <td><%= cliente.direccion %></td>
                <td><%= cliente.coordenadas %></td>
                <td><%= cliente.ip %></td>
                <td><%= cliente.estado %></td>
                <td><%= cliente.Plan ? cliente.Plan.nombre_plan : 'Sin plan' %></td>
                <td>    
                  <a href="/clientes/<%= cliente.id_cliente %>/edit" class="btn">Editar</a>
                  <a href="/pdf/generate/<%= cliente.id_cliente %>" class="btn contract-btn">Crear Contrato</a>    
                </td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </main>
  </div>
  
  <script src="/js/cliente/cliente.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
